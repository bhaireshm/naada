/* Global styles for the Music Player application */

/* Root-level CSS custom properties for theme transitions */
:root {
  /* Transition durations */
  --transition-fast: 150ms;
  --transition-normal: 250ms;
  --transition-slow: 400ms;
  --transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Smooth transitions for theme changes - exclude interactive elements */
@media (min-width: 1024px) {
  *:not(button):not(a):not(input):not(select):not(textarea):not([role="button"]) {
    transition-property: background-color, border-color, color, fill, stroke, opacity, box-shadow, transform;
    transition-duration: var(--transition-normal);
    transition-timing-function: var(--transition-timing);
  }
}

/* Disable transitions on mobile/tablet to prevent click issues */
@media (max-width: 1023px) {
  *:not(button):not(input):not(select):not(textarea):not(a):not([role="button"]):not(.mantine-Button-root) {
    transition: none !important;
  }
  
  /* Re-enable only for specific animations */
  .mantine-Modal-root,
  .mantine-Drawer-root,
  .mantine-Notification-root {
    transition: opacity var(--transition-fast) var(--transition-timing) !important;
  }
}

/* Ensure all interactive elements are clickable and have proper cursor */
button,
a,
[role="button"],
.mantine-Button-root,
.mantine-UnstyledButton-root {
  pointer-events: auto !important;
  cursor: pointer !important;
  -webkit-user-select: none;
  user-select: none;
}

input,
select,
textarea,
.mantine-Input-input,
.mantine-TextInput-input,
.mantine-PasswordInput-input {
  pointer-events: auto !important;
  cursor: text !important;
}

/* Prevent any parent from blocking button clicks - DESKTOP ONLY */
@media (min-width: 1024px) {
  button *,
  .mantine-Button-root *,
  [role="button"] * {
    pointer-events: none;
  }
}

button,
.mantine-Button-root,
[role="button"] {
  pointer-events: auto !important;
}

/* Mobile/Tablet-specific fix for all buttons */
@media (max-width: 1023px) {
  button,
  .mantine-Button-root,
  [role="button"],
  [type="button"],
  [type="submit"] {
    pointer-events: auto !important;
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.2) !important;
  }
  
  /* On mobile/tablet, button children should also be clickable */
  button *,
  button > *,
  .mantine-Button-root *,
  .mantine-Button-root > * {
    pointer-events: auto !important;
  }
}

/* Ensure buttons have explicit transitions */
button,
[role="button"],
.mantine-Button-root {
  transition: background-color var(--transition-fast) var(--transition-timing),
              color var(--transition-fast) var(--transition-timing),
              border-color var(--transition-fast) var(--transition-timing),
              transform var(--transition-fast) var(--transition-timing),
              opacity var(--transition-fast) var(--transition-timing) !important;
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Ensure minimum touch target sizes on mobile/tablet devices */
@media (max-width: 1023px) {
  /* Ensure all interactive elements meet minimum touch target size (44x44px) */
  button,
  a,
  [role="button"],
  input[type="button"],
  input[type="submit"],
  input[type="reset"],
  .mantine-Button-root {
    min-height: 44px;
    min-width: 44px;
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    -webkit-user-select: none;
    user-select: none;
    pointer-events: auto !important;
  }
  
  /* Ensure Google Sign In button is clickable */
  .mantine-Button-root[type="button"] {
    pointer-events: auto !important;
    cursor: pointer !important;
  }
  
  /* Ensure all form buttons are clickable */
  form button,
  form .mantine-Button-root {
    pointer-events: auto !important;
    cursor: pointer !important;
  }
  
  /* Ensure Paper and Container don't block clicks */
  .mantine-Paper-root,
  .mantine-Container-root,
  .mantine-Stack-root {
    pointer-events: auto !important;
  }

  /* Ensure form inputs have adequate height for touch */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  textarea,
  select,
  .mantine-Input-input,
  .mantine-TextInput-input,
  .mantine-PasswordInput-input {
    min-height: 44px;
    font-size: 16px; /* Prevents zoom on iOS */
    pointer-events: auto !important;
  }

  /* Ensure menu items have adequate touch targets */
  [role="menuitem"],
  [role="option"] {
    min-height: 44px;
    padding-top: 12px;
    padding-bottom: 12px;
  }

  /* Ensure links have adequate spacing for touch */
  a {
    padding: 8px 4px;
  }

  /* Improve spacing between interactive elements */
  .mantine-Group-root > * {
    margin: 4px;
  }

  /* Ensure table action buttons have proper spacing */
  .mantine-Table-td .mantine-ActionIcon-root {
    margin: 4px;
  }
}

/* Improve focus visibility for keyboard navigation with theme-aware colors */
*:focus-visible {
  outline: 2px solid var(--mantine-primary-color-filled);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px var(--mantine-primary-color-filled-hover);
  transition: outline-color var(--transition-fast) var(--transition-timing),
              box-shadow var(--transition-fast) var(--transition-timing);
}

/* Enhanced focus styles for better accessibility */
button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible {
  outline: 2px solid var(--mantine-primary-color-filled);
  outline-offset: 2px;
}

/* Ensure proper spacing for mobile/tablet layouts */
@media (max-width: 1023px) {
  /* Add padding to prevent content from being hidden behind fixed elements */
  body {
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Ensure proper spacing around the audio player on mobile */
  .mantine-AppShell-main {
    padding-bottom: calc(100px + env(safe-area-inset-bottom));
  }
}

/* Improve button hover states on touch devices */
@media (hover: none) and (pointer: coarse) {
  /* Remove hover effects on touch devices */
  button:hover,
  a:hover,
  [role="button"]:hover {
    transform: none;
  }

  /* Add active state feedback for touch with smooth transitions */
  button:active,
  a:active,
  [role="button"]:active {
    opacity: 0.7;
    transform: scale(0.98);
    transition: opacity var(--transition-fast) var(--transition-timing),
                transform var(--transition-fast) var(--transition-timing);
  }
}

/* Smooth hover transitions for desktop */
@media (hover: hover) and (pointer: fine) {
  button,
  a,
  [role="button"] {
    transition: background-color var(--transition-fast) var(--transition-timing),
                color var(--transition-fast) var(--transition-timing),
                border-color var(--transition-fast) var(--transition-timing),
                transform var(--transition-fast) var(--transition-timing),
                opacity var(--transition-fast) var(--transition-timing);
  }
}

/* Ensure menu dropdowns are touch-friendly */
.mantine-Menu-dropdown {
  min-width: 200px;
}

.mantine-Menu-item {
  min-height: 44px;
  padding: 12px 16px;
}

/* Improve slider touch targets on mobile/tablet */
@media (max-width: 1023px) {
  .mantine-Slider-thumb {
    width: 20px;
    height: 20px;
  }

  .mantine-Slider-track {
    height: 8px;
  }
}

/* Ensure proper spacing for cards on mobile/tablet */
@media (max-width: 1023px) {
  .mantine-Card-root {
    padding: 16px;
  }
}

/* Improve modal touch interactions */
@media (max-width: 1023px) {
  .mantine-Modal-content {
    max-height: calc(100vh - 80px);
  }

  .mantine-Modal-header {
    min-height: 60px;
  }

  .mantine-Modal-close {
    min-width: 44px;
    min-height: 44px;
  }
}

/* Ensure drawer navigation items are touch-friendly */
.mantine-NavLink-root {
  min-height: 48px;
  padding: 12px 16px;
}

/* Improve table row touch targets on mobile/tablet */
@media (max-width: 1023px) {
  .mantine-Table-tr {
    min-height: 60px;
  }

  .mantine-Table-td {
    padding: 12px 8px;
  }
}

/* Ensure adequate spacing for icon buttons */
.mantine-ActionIcon-root {
  flex-shrink: 0;
  transition: background-color var(--transition-fast) var(--transition-timing),
              color var(--transition-fast) var(--transition-timing),
              border-color var(--transition-fast) var(--transition-timing);
}

/* Improve text input touch targets */
.mantine-TextInput-input,
.mantine-PasswordInput-input,
.mantine-Textarea-input {
  min-height: 44px;
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing),
              color var(--transition-normal) var(--transition-timing);
}

/* Ensure file input has adequate touch target */
.mantine-FileInput-input {
  min-height: 44px;
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

/* Improve notification positioning on mobile/tablet */
@media (max-width: 1023px) {
  .mantine-Notifications-root {
    bottom: calc(100px + 16px) !important;
  }
}

/* Theme-aware transitions for common Mantine components */
.mantine-Card-root,
.mantine-Paper-root {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing),
              box-shadow var(--transition-normal) var(--transition-timing);
}

.mantine-Button-root {
  transition: background-color var(--transition-fast) var(--transition-timing),
              color var(--transition-fast) var(--transition-timing),
              border-color var(--transition-fast) var(--transition-timing),
              transform var(--transition-fast) var(--transition-timing);
}

.mantine-NavLink-root {
  transition: background-color var(--transition-fast) var(--transition-timing),
              color var(--transition-fast) var(--transition-timing);
}

.mantine-Menu-dropdown,
.mantine-Modal-content,
.mantine-Drawer-content {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for text color changes */
h1, h2, h3, h4, h5, h6, p, span, div {
  transition: color var(--transition-normal) var(--transition-timing);
}

/* Ensure links have smooth color transitions */
a {
  transition: color var(--transition-fast) var(--transition-timing),
              background-color var(--transition-fast) var(--transition-timing);
}

/* Theme-aware body background transition */
body {
  transition: background-color var(--transition-normal) var(--transition-timing),
              color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for SegmentedControl (theme switcher) */
.mantine-SegmentedControl-root {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

.mantine-SegmentedControl-label {
  transition: color var(--transition-fast) var(--transition-timing);
}

.mantine-SegmentedControl-indicator {
  transition: transform var(--transition-normal) var(--transition-timing),
              background-color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for Select and other form controls */
.mantine-Select-dropdown,
.mantine-MultiSelect-dropdown {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

.mantine-Select-option,
.mantine-MultiSelect-option {
  transition: background-color var(--transition-fast) var(--transition-timing),
              color var(--transition-fast) var(--transition-timing);
}

/* Smooth transitions for Checkbox and Radio */
.mantine-Checkbox-input,
.mantine-Radio-radio {
  transition: background-color var(--transition-fast) var(--transition-timing),
              border-color var(--transition-fast) var(--transition-timing);
}

/* Smooth transitions for Switch */
.mantine-Switch-track {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

.mantine-Switch-thumb {
  transition: transform var(--transition-normal) var(--transition-timing),
              background-color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for Tabs */
.mantine-Tabs-tab {
  transition: background-color var(--transition-fast) var(--transition-timing),
              color var(--transition-fast) var(--transition-timing),
              border-color var(--transition-fast) var(--transition-timing);
}

/* Smooth transitions for Accordion */
.mantine-Accordion-item {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

.mantine-Accordion-control {
  transition: background-color var(--transition-fast) var(--transition-timing);
}

/* Smooth transitions for Badge */
.mantine-Badge-root {
  transition: background-color var(--transition-fast) var(--transition-timing),
              color var(--transition-fast) var(--transition-timing),
              border-color var(--transition-fast) var(--transition-timing);
}

/* Smooth transitions for Chip */
.mantine-Chip-root {
  transition: background-color var(--transition-fast) var(--transition-timing),
              border-color var(--transition-fast) var(--transition-timing);
}

.mantine-Chip-label {
  transition: color var(--transition-fast) var(--transition-timing);
}

/* Smooth transitions for Alert */
.mantine-Alert-root {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for Progress */
.mantine-Progress-root {
  transition: background-color var(--transition-normal) var(--transition-timing);
}

.mantine-Progress-section {
  transition: width var(--transition-normal) var(--transition-timing),
              background-color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for Slider */
.mantine-Slider-root {
  transition: opacity var(--transition-fast) var(--transition-timing);
}

.mantine-Slider-track {
  transition: background-color var(--transition-normal) var(--transition-timing);
}

.mantine-Slider-thumb {
  transition: background-color var(--transition-fast) var(--transition-timing),
              border-color var(--transition-fast) var(--transition-timing),
              transform var(--transition-fast) var(--transition-timing);
}

/* Smooth transitions for Skeleton (loading states) */
.mantine-Skeleton-root {
  transition: background-color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for Divider */
.mantine-Divider-root {
  transition: border-color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for AppShell components */
.mantine-AppShell-header,
.mantine-AppShell-navbar,
.mantine-AppShell-aside,
.mantine-AppShell-footer {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

/* Smooth transitions for Tooltip */
.mantine-Tooltip-tooltip {
  transition: background-color var(--transition-fast) var(--transition-timing),
              color var(--transition-fast) var(--transition-timing);
}

/* Smooth transitions for Popover */
.mantine-Popover-dropdown {
  transition: background-color var(--transition-normal) var(--transition-timing),
              border-color var(--transition-normal) var(--transition-timing);
}

/* CRITICAL: Mobile/Tablet authentication page fix */
@media (max-width: 1023px) {
  /* Ensure all Mantine input wrappers allow clicks through */
  .mantine-Input-wrapper,
  .mantine-TextInput-wrapper,
  .mantine-PasswordInput-wrapper,
  .mantine-TextInput-root,
  .mantine-PasswordInput-root {
    pointer-events: auto !important;
  }
  
  /* Force actual input elements to be clickable */
  input,
  input[type="text"],
  input[type="email"],
  input[type="password"],
  .mantine-Input-input,
  .mantine-TextInput-input,
  .mantine-PasswordInput-input,
  .mantine-PasswordInput-input input {
    pointer-events: auto !important;
    touch-action: manipulation !important;
    -webkit-user-select: text !important;
    user-select: text !important;
    cursor: text !important;
  }
  
  /* Force buttons and all their children to be clickable */
  button,
  button *,
  button[type="submit"],
  button[type="submit"] *,
  button[type="button"],
  button[type="button"] *,
  .mantine-Button-root,
  .mantine-Button-root *,
  .mantine-Button-inner,
  .mantine-Button-label,
  a,
  a * {
    pointer-events: auto !important;
    touch-action: manipulation !important;
    cursor: pointer !important;
  }
  
  /* Disable pointer events only on decorative elements */
  .mantine-Input-label,
  .mantine-TextInput-label,
  .mantine-PasswordInput-label {
    pointer-events: none !important;
  }
}


/* CRITICAL FIX: Prevent notifications container from blocking clicks */
.mantine-Notifications-root {
  pointer-events: none !important;
}

/* But allow the actual notifications to be clickable */
.mantine-Notifications-root > div,
.mantine-Notification-root {
  pointer-events: auto !important;
}
